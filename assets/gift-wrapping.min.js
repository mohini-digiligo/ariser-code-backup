(()=>{var t={4558:(t,e,i)=>{"use strict";i.d(e,{GQ:()=>a,LE:()=>n,s0:()=>r});var s=i(8971);i(9280);window.MinimogEvents=window.MinimogEvents||new s.Z,window._ThemeEvent=window.MinimogEvents,window.MinimogLibs.loadjs=__loadjs;const r=window.MinimogEvents,n=window.MinimogTheme||{},a=window.MinimogSettings||{};window.MinimogStrings,window.MinimogLibs},9280:()=>{__loadjs=function(){var t=function(){},e={},i={},s={};function r(t,e){if(t){var r=s[t];if(i[t]=e,r)for(;r.length;)r[0](t,e),r.splice(0,1)}}function n(e,i){e.call&&(e={success:e}),i.length?(e.error||t)(i):(e.success||t)(e)}function a(e,i,s,r){var n,o,c=document,p=s.async,h=(s.numRetries||0)+1,u=s.before||t,g=e.replace(/[\?|#].*$/,""),f=e.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(g)?((o=c.createElement("link")).rel="stylesheet",o.href=f,(n="hideFocus"in o)&&o.relList&&(n=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(g)?(o=c.createElement("img")).src=f:((o=c.createElement("script")).src=e,o.async=void 0===p||p),!(o.onload=o.onerror=o.onbeforeload=function(t){var c=t.type[0];if(n)try{o.sheet.cssText.length||(c="e")}catch(t){18!=t.code&&(c="e")}if("e"==c){if((r+=1)<h)return a(e,i,s,r)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";i(e,c,t.defaultPrevented)})!==u(e,o)&&c.head.appendChild(o)}function o(t,i,s){var o,c;if(i&&i.trim&&(o=i),c=(o?s:i)||{},o){if(o in e)throw"LoadJS";e[o]=!0}function p(e,i){!function(t,e,i){var s,r,n=(t=t.push?t:[t]).length,o=n,c=[];for(s=function(t,i,s){if("e"==i&&c.push(t),"b"==i){if(!s)return;c.push(t)}--n||e(c)},r=0;r<o;r++)a(t[r],s,i)}(t,(function(t){n(c,t),e&&n({success:e,error:i},t),r(o,t)}),c)}if(c.returnPromise)return new Promise(p);p()}return o.ready=function(t,e){return function(t,e){t=t.push?t:[t];var r,n,a,o=[],c=t.length,p=c;for(r=function(t,i){i.length&&o.push(t),--p||e(o)};c--;)n=t[c],(a=i[n])?r(n,a):(s[n]=s[n]||[]).push(r)}(t,(function(t){n(e,t)})),o},o.done=function(t){r(t,[])},o.reset=function(){e={},i={},s={}},o.isDefined=function(t){return t in e},o}()},8971:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});class s{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(t,e){return this.events[t]=this.events[t]||[],this.events[t].push(e),()=>this.unSubscribe(t,e)}unSubscribe(t,e){const i=this.events[t];if(i&&Array.isArray(i))for(let t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];(this.events[t]||[]).forEach((t=>{t(...i)}))}}}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=i(4558).GQ,e=i(4558).s0,s=i(4558).LE;class r extends HTMLElement{constructor(){super(),this.cartDrawer=document.querySelector("m-cart-drawer"),this.giftWrapId=this.dataset.giftWrapId,this.giftWrapping=this.dataset.giftWrapping,this.cartItemsSize=parseInt(this.getAttribute("cart-items-size")),this.giftWrapsInCart=parseInt(this.getAttribute("gift-wraps-in-cart")),this.itemsInCart=parseInt(this.getAttribute("items-in-cart")),this.loadingIcon=this.querySelector(".sf-gift-wrapping--loading"),this.cart=document.querySelector("m-cart-drawer"),this.querySelector('[name="attributes[gift-wrapping]"]').addEventListener("change",(t=>{t.target.checked?this.setGiftWrapping():this.removeGiftWrapping()})),this.cartDrawer||(1==this.cartItemsSize&&this.giftWrapsInCart>0?this.removeGiftWrapping():(this.giftWrapsInCart>0&this.giftWrapsInCart!=this.itemsInCart||this.giftWrapsInCart>0&&0==this.giftWrapping.length||0==this.giftWrapsInCart&&this.giftWrapping.length>0)&&this.setGiftWrapping())}setGiftWrapping(){this.loadingIcon.classList.add("show");const t={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({updates:{[this.giftWrapId]:this.itemsInCart},attributes:{"gift-wrapping":!0}})};this.updateCart(t)}removeGiftWrapping(){this.loadingIcon.classList.add("show");const t={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({updates:{[this.giftWrapId]:0},attributes:{"gift-wrapping":"","gift-note":""}})};this.updateCart(t)}updateCart(i){return fetch(`${t.routes.cart_update_url}`,i).then((t=>t.json())).then((i=>{this.loadingIcon.classList.remove("show"),document.body.classList.contains("template-cart")?window.location.href=t.routes.cart:this.cartDrawer&&(this.cart.onCartDrawerUpdate(),this.cartDrawer.classList.toggle("m-cart--empty",0===i.item_count),e.emit(s.pubSubEvents.cartUpdate,i))})).catch((t=>{}))}}customElements.define("m-gift-wrapping-component",r);class n extends HTMLElement{constructor(){super(),this.addEventListener("change",debounce((e=>{let i={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({attributes:{"gift-note":e.target.value}})};fetch(`${t.routes.cart_update_url}`,i)}),300))}}customElements.define("m-gift-note-component",n);class a extends MQuantityInput{constructor(){super()}init(){super.init(),this.giftWrapping=document.querySelector("m-gift-wrapping-component"),this.cartItemsSize=parseInt(this.getAttribute("cart-items-size")),this.giftWrapsInCart=parseInt(this.getAttribute("gift-wraps-in-cart")),this.itemsInCart=parseInt(this.getAttribute("items-in-cart")),1==this.cartItemsSize&&this.giftWrapsInCart>0?this.giftWrapping.removeGiftWrapping():(this.giftWrapsInCart>0&this.giftWrapsInCart!=this.itemsInCart||this.giftWrapsInCart>0&&0==this.giftWrapping.length||0==this.giftWrapsInCart&&this.giftWrapping.length>0)&&this.update()}update(){this.input.value=this.itemsInCart,this.input.dispatchEvent(this.changeEvent)}}customElements.define("m-gift-wrapping-input",a)})()})();