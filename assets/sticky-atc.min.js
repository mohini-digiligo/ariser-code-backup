(()=>{var t={4558:(t,e,i)=>{"use strict";i.d(e,{GQ:()=>r});var n=i(8971);i(9280);window.MinimogEvents=window.MinimogEvents||new n.Z,window._ThemeEvent=window.MinimogEvents,window.MinimogLibs.loadjs=__loadjs;window.MinimogEvents,window.MinimogTheme;const r=window.MinimogSettings||{};window.MinimogStrings,window.MinimogLibs},9280:()=>{__loadjs=function(){var t=function(){},e={},i={},n={};function r(t,e){if(t){var r=n[t];if(i[t]=e,r)for(;r.length;)r[0](t,e),r.splice(0,1)}}function o(e,i){e.call&&(e={success:e}),i.length?(e.error||t)(i):(e.success||t)(e)}function s(e,i,n,r){var o,c,a=document,d=n.async,u=(n.numRetries||0)+1,l=n.before||t,h=e.replace(/[\?|#].*$/,""),m=e.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(h)?((c=a.createElement("link")).rel="stylesheet",c.href=m,(o="hideFocus"in c)&&c.relList&&(o=0,c.rel="preload",c.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(c=a.createElement("img")).src=m:((c=a.createElement("script")).src=e,c.async=void 0===d||d),!(c.onload=c.onerror=c.onbeforeload=function(t){var a=t.type[0];if(o)try{c.sheet.cssText.length||(a="e")}catch(t){18!=t.code&&(a="e")}if("e"==a){if((r+=1)<u)return s(e,i,n,r)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";i(e,a,t.defaultPrevented)})!==l(e,c)&&a.head.appendChild(c)}function c(t,i,n){var c,a;if(i&&i.trim&&(c=i),a=(c?n:i)||{},c){if(c in e)throw"LoadJS";e[c]=!0}function d(e,i){!function(t,e,i){var n,r,o=(t=t.push?t:[t]).length,c=o,a=[];for(n=function(t,i,n){if("e"==i&&a.push(t),"b"==i){if(!n)return;a.push(t)}--o||e(a)},r=0;r<c;r++)s(t[r],n,i)}(t,(function(t){o(a,t),e&&o({success:e,error:i},t),r(c,t)}),a)}if(a.returnPromise)return new Promise(d);d()}return c.ready=function(t,e){return function(t,e){t=t.push?t:[t];var r,o,s,c=[],a=t.length,d=a;for(r=function(t,i){i.length&&c.push(t),--d||e(c)};a--;)o=t[a],(s=i[o])?r(o,s):(n[o]=n[o]||[]).push(r)}(t,(function(t){o(e,t)})),c},c.done=function(t){r(t,[])},c.reset=function(){e={},i={},n={}},c.isDefined=function(t){return t in e},c}()},8971:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});class n{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(t,e){return this.events[t]=this.events[t]||[],this.events[t].push(e),()=>this.unSubscribe(t,e)}unSubscribe(t,e){const i=this.events[t];if(i&&Array.isArray(i))for(let t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(this.events[t]||[]).forEach((t=>{t(...i)}))}}}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e){var i=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"===t(i)?i:String(i)}var n=i(4558).GQ;customElements.get("sticky-atc")||customElements.define("sticky-atc",class extends HTMLElement{constructor(){var t,i,n;super(),t=this,n=()=>{this.observer&&(this.observer.observe(this.productFormActions),this.observeTarget=this.productFormActions)},(i=e(i="setObserveTarget"))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,this.selectors={prodTitle:".psa__title",mainImage:".spc__main-img",atc:".add-to-cart",buyNowBtn:".prod__dynamic_checkout",variantIdSelect:'[name="id"]'},document.body.classList.add("sticky-atc-bar-enabled"),this.hasCustomFields=!!document.querySelector(".sf-prod-template__desktop .product__custom-field")}connectedCallback(){var t,e;this.productFormActions=document.querySelector(".f-product-form"),this.container=this.closest(".prod__sticky-atc"),this.mainProduct=document.querySelector(".main-product.product-form"),this.mainATCButton=null===(t=this.mainProduct)||void 0===t?void 0:t.querySelector(this.selectors.atc),this.mainProductDynamic=null===(e=this.mainProduct)||void 0===e?void 0:e.querySelector(this.selectors.buyNowBtn),this.stickyATCBar=document.querySelector(".prod__sticky-atc"),this.productId=this.dataset.productId,this.domNodes=queryDomNodes(this.selectors,this.stickyATCBar),this.variantData=this.getVariantData(),this.init(),this.setStickyAddToCartHeight(),this.addEventListener("change",(()=>{const t=this.querySelector(this.selectors.variantIdSelect).value;this.currentVariant=this.variantData.find((e=>e.id===Number(t))),this.updateButton(!0,"",!1),this.currentVariant?this.updateButton(!this.currentVariant.available,window.MinimogStrings.soldOut):this.updateButton(!0,"",!0)})),document.addEventListener("matchMobile",(()=>{this.setStickyAddToCartHeight()})),document.addEventListener("unmatchMobile",(()=>{this.setStickyAddToCartHeight()}))}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.container.querySelector('[type="application/json"]').textContent),this.variantData}init(){if(!this.mainATCButton)return void this.container.classList.remove("translate-y-full");const{prodTitle:t,mainImage:e,atc:i,buyNowBtn:r}=this.domNodes;r&&(this.enable_dynamic_checkout=!0);const o=`-${n.headerHeight||66}px 0px 0px 0px`;"IntersectionObserver"in window&&(this.observer=new IntersectionObserver((t=>{t.forEach((t=>{const e=1!==t.intersectionRatio?"remove":"add";this.container.classList[e]("translate-y-full"),document.documentElement.classList[1!=t.intersectionRatio?"remove":"add"]("stick-atc-show")}))}),{threshold:1,rootMargin:o})),null==t||t.addEventListener("click",window.MinimogLibs.scrollToTop),null==e||e.addEventListener("click",window.MinimogLibs.scrollToTop),this.hasCustomFields&&(i.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),window.MinimogLibs.scrollToTop((()=>this.mainATCButton.click()))})),r&&r.addEventListener("click",(t=>{validateForm(this.mainProduct).length>0&&(t.preventDefault(),t.stopPropagation(),window.MinimogLibs.scrollToTop((()=>{var t;return null===(t=this.mainProductDynamic)||void 0===t?void 0:t.click()})))}),!0)),this.setObserveTarget(),this.syncWithMainProductForm()}checkDevice(t){const e=this.clientHeight+"px";document.documentElement.style.setProperty("--f-sticky-atc-bar-height",e)}updateButton(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;const i=this.querySelector(".sticky-atc-form");if(!i)return;const n=i.querySelector('[name="add"]'),r=i.querySelector('[name="add"] > .atc-text'),o=i.dataset.preorder;n&&(t?(n.setAttribute("disabled","disabled"),e&&(r.textContent=e)):(n.removeAttribute("disabled"),n.classList.remove("disabled"),r.textContent="true"===o?window.MinimogStrings.preorder:window.MinimogStrings.addToCart))}syncWithMainProductForm(){const t=this.querySelector('[name="id"]');window.MinimogEvents.subscribe(`${this.productId}__VARIANT_CHANGE`,(async e=>{t.value=e.id}))}setStickyAddToCartHeight(){document.documentElement.style.setProperty("--f-sticky-atc-bar-height",this.offsetHeight+"px"),window.MinimogSettings.stickyAddToCartHeight=this.offsetHeight}})})()})();