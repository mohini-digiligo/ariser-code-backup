(()=>{var e={4558:(e,t,r)=>{"use strict";r.d(t,{LE:()=>s});var i=r(8971);r(9280);window.MinimogEvents=window.MinimogEvents||new i.Z,window._ThemeEvent=window.MinimogEvents,window.MinimogLibs.loadjs=__loadjs;window.MinimogEvents;const s=window.MinimogTheme||{};window.MinimogSettings,window.MinimogStrings,window.MinimogLibs},9280:()=>{__loadjs=function(){var e=function(){},t={},r={},i={};function s(e,t){if(e){var s=i[e];if(r[e]=t,s)for(;s.length;)s[0](e,t),s.splice(0,1)}}function n(t,r){t.call&&(t={success:t}),r.length?(t.error||e)(r):(t.success||e)(t)}function o(t,r,i,s){var n,a,c=document,u=i.async,d=(i.numRetries||0)+1,h=i.before||e,l=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");s=s||0,/(^css!|\.css$)/.test(l)?((a=c.createElement("link")).rel="stylesheet",a.href=p,(n="hideFocus"in a)&&a.relList&&(n=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(l)?(a=c.createElement("img")).src=p:((a=c.createElement("script")).src=t,a.async=void 0===u||u),!(a.onload=a.onerror=a.onbeforeload=function(e){var c=e.type[0];if(n)try{a.sheet.cssText.length||(c="e")}catch(e){18!=e.code&&(c="e")}if("e"==c){if((s+=1)<d)return o(t,r,i,s)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";r(t,c,e.defaultPrevented)})!==h(t,a)&&c.head.appendChild(a)}function a(e,r,i){var a,c;if(r&&r.trim&&(a=r),c=(a?i:r)||{},a){if(a in t)throw"LoadJS";t[a]=!0}function u(t,r){!function(e,t,r){var i,s,n=(e=e.push?e:[e]).length,a=n,c=[];for(i=function(e,r,i){if("e"==r&&c.push(e),"b"==r){if(!i)return;c.push(e)}--n||t(c)},s=0;s<a;s++)o(e[s],i,r)}(e,(function(e){n(c,e),t&&n({success:t,error:r},e),s(a,e)}),c)}if(c.returnPromise)return new Promise(u);u()}return a.ready=function(e,t){return function(e,t){e=e.push?e:[e];var s,n,o,a=[],c=e.length,u=c;for(s=function(e,r){r.length&&a.push(e),--u||t(a)};c--;)n=e[c],(o=r[n])?s(n,o):(i[n]=i[n]||[]).push(s)}(e,(function(e){n(t,e)})),a},a.done=function(e){s(e,[])},a.reset=function(){t={},r={},i={}},a.isDefined=function(e){return e in t},a}()},8971:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),()=>this.unSubscribe(e,t)}unSubscribe(e,t){const r=this.events[e];if(r&&Array.isArray(r))for(let e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];(this.events[e]||[]).forEach((e=>{e(...r)}))}}}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,r||"default");if("object"!==e(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}function i(e,r,i){return(r=t(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}var s=r(4558).LE;customElements.get("recipient-form")||customElements.define("recipient-form",class extends HTMLElement{constructor(){var e,t,r;super(),i(this,"cartUpdateUnsubscriber",void 0),i(this,"variantChangeUnsubscriber",void 0),i(this,"cartErrorUnsubscriber",void 0),this.checkboxInput=this.querySelector(`#Recipient-Checkbox-${this.dataset.sectionId}`),this.checkboxInput.disabled=!1,this.hiddenControlField=this.querySelector(`#Recipient-Control-${this.dataset.sectionId}`),this.hiddenControlField.disabled=!0,this.emailInput=this.querySelector(`#Recipient-email-${this.dataset.sectionId}`),this.nameInput=this.querySelector(`#Recipient-name-${this.dataset.sectionId}`),this.messageInput=this.querySelector(`#Recipient-message-${this.dataset.sectionId}`),this.errorMessageWrapper=this.querySelector(".product-form__recipient-error-message-wrapper"),this.errorMessageList=null===(e=this.errorMessageWrapper)||void 0===e?void 0:e.querySelector("ul"),this.errorMessage=null===(t=this.errorMessageWrapper)||void 0===t?void 0:t.querySelector(".error-message"),this.defaultErrorHeader=null===(r=this.errorMessage)||void 0===r?void 0:r.innerText,this.currentProductVariantId=this.dataset.productVariantId,this.productId=this.dataset.productId,this.addEventListener("change",this.onChange.bind(this))}connectedCallback(){this.cartUpdateUnsubscriber=window.MinimogEvents.subscribe(s.pubSubEvents.cartUpdate,(e=>{this.resetRecipientForm()})),this.variantChangeUnsubscriber=window.MinimogEvents.subscribe(`${this.productId}__VARIANT_CHANGE`,(e=>{this.currentProductVariantId=e.id})),this.cartUpdateUnsubscriber=window.MinimogEvents.subscribe(s.pubSubEvents.cartError,(e=>{"product-form"===e.source&&e.productVariantId.toString()===this.currentProductVariantId&&this.displayErrorMessage(e.message,e.errors)}))}disconnectedCallback(){this.cartUpdateUnsubscriber&&this.cartUpdateUnsubscriber(),this.variantChangeUnsubscriber&&this.variantChangeUnsubscriber(),this.cartErrorUnsubscriber&&this.cartErrorUnsubscriber()}onChange(){this.checkboxInput.checked||(this.clearInputFields(),this.clearErrorMessage())}displayErrorMessage(e,t){this.clearErrorMessage();if(Object.keys(t).length>1&&(this.errorMessageWrapper.hidden=!1),"object"==typeof t)return this.errorMessage.innerText=this.defaultErrorHeader,Object.entries(t).forEach((e=>{let[t,r]=e;const i=`RecipientForm-${t}-error-${this.dataset.sectionId}`,s=`#Recipient-${t}-${this.dataset.sectionId}`,n=this.querySelector(`${s}`),o=`${(null==n?void 0:n.getAttribute("placeholder"))||t} ${r}`,a=this.querySelector(`#${i}`),c=null==a?void 0:a.querySelector(".error-message");if(!c)return;this.errorMessageList&&this.errorMessageList.appendChild(this.createErrorListItem(s,o)),c.innerText=`${o}.`,a.classList.remove("hidden");const u=this[`${t}Input`];u&&(u.setAttribute("aria-invalid",!0),u.setAttribute("aria-describedby",i))}));this.errorMessage.innerText=t}createErrorListItem(e,t){const r=document.createElement("li"),i=document.createElement("a");return i.setAttribute("href",e),i.innerText=t,r.appendChild(i),r.className="error-message",r}clearInputFields(){this.emailInput.value="",this.nameInput.value="",this.messageInput.value=""}clearErrorMessage(){this.errorMessageWrapper.hidden=!0,this.errorMessageList&&(this.errorMessageList.innerHTML=""),this.querySelectorAll(".sf-recipient-fields .sf-form__message").forEach((e=>{e.classList.add("hidden");const t=e.querySelector(".error-message");t&&(t.innerText="")})),[this.emailInput,this.messageInput,this.nameInput].forEach((e=>{e.setAttribute("aria-invalid",!1),e.removeAttribute("aria-describedby")}))}resetRecipientForm(){this.checkboxInput.checked&&(this.checkboxInput.checked=!1,this.clearInputFields(),this.clearErrorMessage())}})})()})();